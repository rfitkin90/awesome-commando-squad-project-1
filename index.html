<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Event Planner</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="./assets/css/reset.css"> -->
    <script src="./assets/javascript/moment-with-locales.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.7.0/firebase.js"></script>
    <link rel="stylesheet" href="./assets/css/style.css">
    <script src="./assets/javascript/app.js"></script>
</head>

<body>

    <!-- seatgeek API -->
    <form>
        <button class='btn' id='sports-argument'>Sports</button>
        <button class='btn' id='music-argument'>Music</button>
        <div class="form-group">
            <label for="exampleInputPassword1">Enter Artist or Team Name</label>
            <input class="form-control" id="seatgeek-argument" placeholder="">
        </div>
        <button type="submit" class="btn btn-primary" id='seatgeek-btn'>Submit</button>
    </form>

    <!-- additional information div -->
    <div id="additional-info">
        <h2>Additional Info</h2>
        <div id="weather-info">
        </div>
    </div>

    <!-- google map -->
    <div id="map"></div>

    <!-- create map and append marker to event location -->
    <script>
        $(document).on('click', '.info-btn', function (e) {
            e.preventDefault();
            var latValue = parseFloat($(this).attr('data-lat'));
            var lngValue = parseFloat($(this).attr('data-lng'));
            // intiMap(latValue, lngValue);
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: {
                    lat: latValue,
                    lng: lngValue
                }
            });
            var marker = new google.maps.Marker({
                position: {
                    lat: latValue,
                    lng: lngValue
                },
                map: map,
            });

            var service;
            var infowindow;

            var request = {
                location: {
                    lat: latValue,
                    lng: lngValue
                },
                radius: '500',
                type: ['restaurant']
            };

            service = new google.maps.places.PlacesService(map);
            service.nearbySearch(request, callback);

            function callback(results, status) {
                if (status == google.maps.places.PlacesServiceStatus.OK) {
                    for (var i = 0; i < results.length; i++) {
                        var place = results[i];
                        createMarker(results[i]);
                    }
                }
            }

            function createMarker(place) {
                var placeLoc = place.geometry.location;
                var marker = new google.maps.Marker({
                    map: map,
                    position: place.geometry.location
                });

                google.maps.event.addListener(marker, 'click', function () {
                    console.log(place.name);
                    // infowindow.open(map, this);
                });
            }
        });
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBJspIZnBYBASjscIsyBXVgUnt-u7SETMY&libraries=places">
    </script>





    <!-- event choices -->
    <div id='seatgeek-results'></div>

</body>

</html>